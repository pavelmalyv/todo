import{r as m,j as s,c as j,U as _,W as u,z as p,m as k,E as x,V as y,y as b}from"./index-DZnvPZAH.js";import{E as g}from"./fields-Z0O1DHnl.js";import{M as N}from"./MessageInfo-hB-86Cfu.js";import{C as E}from"./Checkbox-CXGVtCPz.js";import{e as S,E as T}from"./EditTaskModal-D3vliasy.js";const f="_body_3toe4_1",M="_title_3toe4_14",d={body:f,title:M},$=({title:e,children:n})=>{const o=m.useId();return s.jsx("section",{className:"section","aria-labelledby":o,children:s.jsxs("div",{className:d.body,children:[s.jsx("h2",{id:o,className:j(d.title,"h2"),children:e}),n]})})},C="_button_6l46s_1",r={button:C},I="_item_1xyjl_1",L="_task_1xyjl_5",v="_time_1xyjl_20",w="_checkbox_1xyjl_27",D="_skeleton_1xyjl_31",a={item:I,task:L,time:v,checkbox:w,"skeleton-wrapper":"_skeleton-wrapper_1xyjl_31",skeleton:D},O=({task:e})=>{const{updateTask:n}=S(),[o,c]=m.useState(!1),l=async(t,i)=>{try{await n.update(i,{done:t.target.checked})}catch{k(x.updateTask)}};return s.jsx("div",{className:a.item,children:e?s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:a.task,children:[s.jsx(E,{className:a.checkbox,styleType:"through",label:s.jsxs(s.Fragment,{children:[s.jsx("span",{className:a.time,children:_(e.dueAt.seconds)})," ",e.name]}),checked:e.done,isLoading:n.isLoading,onChange:t=>l(t,e.id)}),s.jsx(u,{styleType:"circle",hiddenName:"Редактировать задачу",onClick:()=>c(!0),className:a.button,children:"edit"})]}),s.jsx(T,{initialData:e,isOpen:o,onClose:()=>c(!1)})]}):s.jsx("div",{className:a["skeleton-wrapper"],children:s.jsx(p,{className:a.skeleton})})})},R=({tasks:e,isLoading:n,notFoundMessage:o,error:c,children:l})=>c?s.jsx(g,{message:x.tasksLoading}):s.jsx(s.Fragment,{children:e.length===0?s.jsx(N,{message:o}):s.jsxs(y,{isLoading:n,hiddenMessage:b.tasks,children:[s.jsx("ul",{className:r.list,children:e.map((t,i)=>{const h=t?t.id:i;return s.jsx("li",{className:r.item,children:s.jsx(O,{task:t})},h)})}),l]})}),A=({children:e})=>s.jsx("div",{className:r.button,children:e});R.Button=A;export{$ as S,R as T};
