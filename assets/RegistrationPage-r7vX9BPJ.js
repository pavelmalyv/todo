import{k as g,n as w,b as x,u as b,r as j,j as e,L as C,l as v,P as k,e as y}from"./index-w8OMcklE.js";import{A as E}from"./Auth-Bd6CPmEC.js";import{B as h}from"./Book-x-EUmQLG.js";import{u as L,C as m,F as u,o as f,a as P,g as R,b as U,e as M}from"./fields-fFkvK8Ri.js";import{C as F}from"./Checkbox-BV7o_ash.js";import{g as q}from"./firebase-BKEigl4L.js";const A=()=>{const[i,,d,l]=g(x),n=async({email:o,password:p})=>{try{await i(o,p)}catch(t){throw console.error(t),w(t)}},c=l?w(l):void 0;return[n,d,c]},I=y({email:M,password:U,passwordRepeat:R("password"),policy:P}),T=()=>{b("Регистрация");const i=j.useId(),[d,l,n]=A(),{handleSubmit:c,control:o}=L({resolver:f(I),defaultValues:{email:"",password:"",passwordRepeat:"",policy:!1}}),p=async s=>{await d({email:s.email,password:s.password})};let t;return n&&(t=q(n)),e.jsx(h,{"aria-labelledby":i,children:e.jsx(h.Main,{title:"Регистрация",titleId:i,children:e.jsxs(E,{titleId:i,buttonName:"Зарегистрироваться",isLoading:l,errorMessage:t,footerLinks:[{description:"Уже зарегистрированы?",linkName:"Войти",linkUrl:C}],onSubmit:c(p),children:[e.jsx(m,{name:"email",control:o,render:({field:s,fieldState:r})=>{var a;return e.jsx(u,{type:"email",label:"E-mail",placeholder:"E-mail",autoComplete:"email",...s,"aria-required":!0,"aria-invalid":r.invalid,errorMessage:(a=r.error)==null?void 0:a.message})}}),e.jsx(m,{name:"password",control:o,render:({field:s,fieldState:r})=>{var a;return e.jsx(u,{label:"Пароль",placeholder:"Пароль",isPassword:!0,autoComplete:"new-password",...s,"aria-required":!0,"aria-invalid":r.invalid,errorMessage:(a=r.error)==null?void 0:a.message})}}),e.jsx(m,{name:"passwordRepeat",control:o,render:({field:s,fieldState:r})=>{var a;return e.jsx(u,{label:"Повтор пароля",placeholder:"Повтор пароля",isPassword:!0,autoComplete:"new-password",...s,"aria-required":!0,"aria-invalid":r.invalid,errorMessage:(a=r.error)==null?void 0:a.message})}}),e.jsx(m,{name:"policy",control:o,render:({field:s,fieldState:r})=>{var a;return e.jsx(F,{label:e.jsxs(e.Fragment,{children:["Я принимаю",e.jsx("br",{}),e.jsx(v,{to:k,target:"_blank",className:"link",children:"политику конфиденциальности"})]}),...s,"aria-required":!0,"aria-invalid":r.invalid,errorMessage:(a=r.error)==null?void 0:a.message})}})]})})})};export{T as default};
