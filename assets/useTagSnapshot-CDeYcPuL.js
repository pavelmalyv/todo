import{r as e,J as h,n as b,G as p,K as v,M as w,O as x}from"./index-BgGn9oyM.js";import{d as z}from"./EditTaskModal-BSccCvCv.js";const T=(o,{isOptional:i}={})=>{const[f,d]=e.useState(null),[g,n]=e.useState(!0),[m,E]=e.useState(void 0),[l,,t]=h(),c=l?l.uid:null;t&&console.error(t);const s=e.useCallback(r=>{E(b(r)),n(!1),console.error(r)},[]);return e.useEffect(()=>{t!=null&&t.message&&s(new Error("Authorization error"))},[t==null?void 0:t.message,s]),e.useEffect(()=>{if(!c||!o)return;const r=p(v(w(c),o),async a=>{n(!0);let u;if(a.data())try{u=await z.validate({id:a.id,...a.data()})}catch(S){console.error(S)}u===void 0&&!i&&s(new x),d(u),n(!1)},a=>{s(a)});return()=>r()},[c,o,i,s]),[f,g,m]};export{T as u};
